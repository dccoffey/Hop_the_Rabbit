<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hop Along with Rabbit - Math Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard', cursive;
            background: linear-gradient(135deg, #87CEEB 0%, #FFEB3B 50%, #FFD700 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .game-header {
            text-align: center;
            background: linear-gradient(180deg, #4169E1 0%, #1E3A8A 100%);
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            border: 4px solid #FFD700;
        }

        .game-title {
            color: #FFD700;
            font-size: 2.5em;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .game-subtitle {
            color: #FFF8DC;
            font-size: 1.2em;
        }

        /* Settings Panel */
        .settings-panel {
            background: linear-gradient(180deg, #FFF8DC 0%, #FFE4B5 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #4169E1;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        .settings-title {
            color: #4169E1;
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .setting-group {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #87CEEB;
        }

        .setting-label {
            display: block;
            color: #4169E1;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .setting-select, .setting-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #FFD700;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            background: #FFFEF0;
        }

        .setting-select:focus, .setting-input:focus {
            outline: none;
            border-color: #4169E1;
            box-shadow: 0 0 8px rgba(65, 105, 225, 0.3);
        }

        .operations-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .operation-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
            background: #E6F3FF;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .operation-checkbox:hover {
            background: #CCE5FF;
        }

        .operation-checkbox input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .operation-checkbox span {
            font-size: 1.1em;
            color: #4169E1;
        }

        /* Difficulty Buttons */
        .difficulty-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .diff-btn {
            width: 42px;
            height: 42px;
            font-size: 1.1em;
            font-family: inherit;
            font-weight: bold;
            background: linear-gradient(180deg, #E6F3FF 0%, #CCE5FF 100%);
            border: 2px solid #87CEEB;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: #4169E1;
        }

        .diff-btn:hover {
            background: linear-gradient(180deg, #CCE5FF 0%, #99CCFF 100%);
            border-color: #4169E1;
        }

        .diff-btn.selected {
            background: linear-gradient(180deg, #4169E1 0%, #1E3A8A 100%);
            color: white;
            border-color: #FFD700;
            box-shadow: 0 2px 8px rgba(65, 105, 225, 0.4);
        }

        /* Start Button */
        .start-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            padding: 15px 30px;
            font-size: 1.5em;
            font-family: inherit;
            background: linear-gradient(180deg, #32CD32 0%, #228B22 100%);
            color: white;
            border: 4px solid #FFD700;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .start-btn:active {
            transform: translateY(0);
        }

        /* Game Area */
        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        /* Status Bar */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            background: linear-gradient(180deg, #4169E1 0%, #1E3A8A 100%);
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #FFD700;
        }

        .status-item {
            text-align: center;
            color: white;
        }

        .status-label {
            font-size: 0.9em;
            color: #FFD700;
        }

        .status-value {
            font-size: 1.4em;
            font-weight: bold;
        }

        .lives-display {
            display: flex;
            gap: 5px;
        }

        .life-heart {
            font-size: 1.5em;
            transition: all 0.3s;
        }

        .life-heart.lost {
            opacity: 0.3;
            transform: scale(0.8);
        }

        /* Basket Progress */
        .basket-progress {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            padding-bottom: 30px;
        }

        .basket {
            width: 70px;
            height: 80px;
            position: relative;
            transition: all 0.5s;
        }

        .basket-body {
            position: absolute;
            bottom: 0;
            width: 70px;
            height: 55px;
            background:
                repeating-linear-gradient(
                    90deg,
                    #D2691E 0px,
                    #D2691E 4px,
                    #8B4513 4px,
                    #8B4513 8px
                ),
                repeating-linear-gradient(
                    0deg,
                    #C4A35A 0px,
                    #C4A35A 6px,
                    #8B6914 6px,
                    #8B6914 12px
                );
            background-blend-mode: multiply;
            border-radius: 5px 5px 20px 20px;
            border: 3px solid #654321;
            overflow: hidden;
        }

        .basket-rim {
            position: absolute;
            bottom: 50px;
            left: -2px;
            width: 74px;
            height: 12px;
            background: linear-gradient(180deg, #D2691E 0%, #8B4513 100%);
            border-radius: 5px;
            border: 2px solid #654321;
            z-index: 5;
        }

        .basket-veggies {
            position: absolute;
            bottom: 8px;
            left: 5px;
            right: 5px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-content: flex-end;
            gap: 1px;
            font-size: 0.7em;
            line-height: 1;
            max-height: 45px;
            overflow: hidden;
        }

        .basket-fill {
            display: none;
        }

        .basket.complete {
            box-shadow: 0 0 20px #FFD700;
            animation: basketGlow 1s infinite alternate;
        }

        @keyframes basketGlow {
            from { box-shadow: 0 0 10px #FFD700; }
            to { box-shadow: 0 0 30px #FFD700; }
        }

        .basket-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7em;
            color: #1E3A8A;
            font-weight: bold;
            white-space: nowrap;
            background: rgba(255,255,255,0.85);
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* Scene Area */
        .scene-area {
            background: linear-gradient(180deg, #87CEEB 0%, #90EE90 60%, #228B22 100%);
            height: 200px;
            border-radius: 20px;
            position: relative;
            margin-bottom: 20px;
            overflow: hidden;
            border: 4px solid #4169E1;
        }

        /* Clouds */
        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.9;
        }

        .cloud1 { width: 60px; height: 30px; top: 20px; left: 10%; animation: floatCloud 15s infinite linear; }
        .cloud2 { width: 80px; height: 40px; top: 40px; left: 50%; animation: floatCloud 20s infinite linear; }
        .cloud3 { width: 50px; height: 25px; top: 15px; left: 80%; animation: floatCloud 18s infinite linear; }

        @keyframes floatCloud {
            from { transform: translateX(-100px); }
            to { transform: translateX(calc(100vw + 100px)); }
        }

        /* Den */
        .rabbit-den {
            position: absolute;
            bottom: 0;
            left: 20px;
            width: 100px;
            height: 80px;
        }

        .den-mound {
            position: absolute;
            bottom: 0;
            width: 100px;
            height: 60px;
            background: linear-gradient(180deg, #8B4513 0%, #654321 100%);
            border-radius: 50px 50px 0 0;
        }

        .den-hole {
            position: absolute;
            bottom: 0;
            left: 30px;
            width: 40px;
            height: 35px;
            background: #2F1810;
            border-radius: 20px 20px 0 0;
        }

        /* Baby Bunnies */
        .baby-bunnies {
            position: absolute;
            bottom: 5px;
            left: 32px;
            display: flex;
            gap: 2px;
            opacity: 1;
            transition: transform 0.5s;
        }

        .baby-bunnies.excited {
            animation: bunniesExcited 0.5s ease;
        }

        @keyframes bunniesExcited {
            0%, 100% { transform: translateY(0); }
            25% { transform: translateY(-5px); }
            50% { transform: translateY(0); }
            75% { transform: translateY(-3px); }
        }

        .baby-bunny {
            font-size: 1.2em;
        }

        /* Peter Rabbit */
        .rabbit {
            position: absolute;
            bottom: 20px;
            left: 150px;
            transition: all 0.5s ease;
            z-index: 10;
        }

        .rabbit.scared {
            animation: rabbitShake 0.3s infinite;
        }

        .rabbit.running {
            animation: rabbitRun 0.5s forwards;
        }

        .rabbit.celebrating {
            animation: rabbitJump 0.5s ease;
        }

        .rabbit.sleeping {
            animation: rabbitSleep 2s infinite;
        }

        @keyframes rabbitShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes rabbitRun {
            0% { left: 150px; }
            100% { left: 40px; opacity: 0; }
        }

        @keyframes rabbitJump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes rabbitSleep {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        .rabbit-body {
            position: relative;
            width: 50px;
            height: 60px;
        }

        /* Peter Rabbit Image Style */
        .rabbit-img {
            width: 100px;
            height: auto;
        }

        /* Veggie being collected */
        .collected-veggie {
            position: absolute;
            font-size: 1.5em;
            animation: veggieCollect 1s forwards;
            z-index: 5;
        }

        @keyframes veggieCollect {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5) translateY(-30px); }
            100% { transform: scale(0.5) translateX(-100px) translateY(-20px); opacity: 0; }
        }

        /* Dog */
        .dog {
            position: absolute;
            bottom: 40px;
            right: -100px;
            font-size: 3em;
            transition: right 0.5s ease;
        }

        .dog.barking {
            right: 30px;
            animation: dogBark 0.3s infinite;
        }

        @keyframes dogBark {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .bark-bubble {
            position: absolute;
            right: 120px;
            bottom: 80px;
            background: white;
            padding: 10px 15px;
            border-radius: 15px;
            font-size: 0.5em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .bark-bubble.visible {
            opacity: 1;
            animation: barkBubble 0.5s ease;
        }

        @keyframes barkBubble {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Math Problem Area */
        .problem-area {
            background: linear-gradient(180deg, #FFFEF0 0%, #FFF8DC 100%);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            border: 4px solid #4169E1;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .problem-text {
            font-size: 3em;
            color: #4169E1;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .answers-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 500px;
            margin: 0 auto;
        }

        .answer-btn {
            padding: 20px;
            font-size: 1.8em;
            font-family: inherit;
            background: linear-gradient(180deg, #FFD700 0%, #FFA500 100%);
            border: 3px solid #4169E1;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            color: #1E3A8A;
            font-weight: bold;
        }

        .answer-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .answer-btn:active {
            transform: scale(0.98);
        }

        .answer-btn.correct {
            background: linear-gradient(180deg, #32CD32 0%, #228B22 100%);
            color: white;
            animation: correctPulse 0.5s;
        }

        .answer-btn.wrong {
            background: linear-gradient(180deg, #FF6347 0%, #DC143C 100%);
            color: white;
            animation: wrongShake 0.5s;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Feedback Message */
        .feedback {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 40px 60px;
            border-radius: 20px;
            font-size: 2em;
            z-index: 1000;
            display: none;
            text-align: center;
            border: 4px solid #FFD700;
        }

        .feedback.show {
            display: block;
            animation: feedbackPop 0.5s ease;
        }

        @keyframes feedbackPop {
            0% { transform: translate(-50%, -50%) scale(0); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .feedback-emoji {
            font-size: 3em;
            display: block;
            margin-bottom: 20px;
        }

        .feedback-sub {
            font-size: 0.6em;
            color: #FFD700;
            margin-top: 15px;
        }

        /* Game Over / Win Screen */
        .game-end-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .game-end-screen.show {
            display: flex;
        }

        .end-content {
            background: linear-gradient(180deg, #4169E1 0%, #1E3A8A 100%);
            padding: 50px;
            border-radius: 30px;
            text-align: center;
            border: 5px solid #FFD700;
            max-width: 90%;
            animation: endScreenPop 0.5s ease;
        }

        @keyframes endScreenPop {
            0% { transform: scale(0) rotate(-10deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1) rotate(0); }
        }

        .end-emoji {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .end-title {
            color: #FFD700;
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .end-message {
            color: white;
            font-size: 1.3em;
            margin-bottom: 30px;
        }

        .play-again-btn {
            padding: 15px 40px;
            font-size: 1.5em;
            font-family: inherit;
            background: linear-gradient(180deg, #32CD32 0%, #228B22 100%);
            color: white;
            border: 3px solid #FFD700;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .play-again-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* Sleeping Scene */
        .sleeping-scene {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
        }

        .sleeping-scene.active {
            display: block;
        }

        .moon {
            position: absolute;
            top: 20px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: #FFFACD;
            border-radius: 50%;
            box-shadow: 0 0 30px #FFFACD;
        }

        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .star {
            position: absolute;
            color: white;
            animation: twinkle 1s infinite alternate;
        }

        @keyframes twinkle {
            from { opacity: 0.5; }
            to { opacity: 1; }
        }

        .cozy-den {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .sleeping-family {
            display: flex;
            align-items: flex-end;
            gap: 2px;
            animation: sleepBreathe 2s infinite ease-in-out;
        }

        .parent-rabbit {
            font-size: 3em;
        }

        .baby-rabbits {
            font-size: 1.4em;
            letter-spacing: -2px;
        }

        .veggie-pile-left, .veggie-pile-right {
            position: absolute;
            font-size: 1.2em;
            bottom: 35px;
        }

        .veggie-pile-left {
            left: -60px;
        }

        .veggie-pile-right {
            right: -60px;
        }

        .veggie-floor {
            font-size: 0.9em;
            margin-top: 5px;
            letter-spacing: -1px;
        }

        @keyframes sleepBreathe {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .zzz {
            position: absolute;
            top: -40px;
            right: 30px;
            font-size: 1.8em;
            color: #87CEEB;
            animation: zzzFloat 2s infinite;
        }

        @keyframes zzzFloat {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(-30px) rotate(10deg); opacity: 0; }
        }

        .food-baskets {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .game-container {
                padding: 10px;
            }

            .game-title {
                font-size: 1.6em;
            }

            .game-subtitle {
                font-size: 1em;
            }

            .problem-text {
                font-size: 1.8em;
            }

            .problem-area {
                padding: 20px 15px;
            }

            .answer-btn {
                padding: 12px 8px;
                font-size: 1.3em;
            }

            .answers-grid {
                gap: 10px;
                max-width: 100%;
            }

            .scene-area {
                height: 140px;
            }

            .basket {
                width: 50px;
                height: 60px;
            }

            .basket-body {
                width: 50px;
                height: 40px;
            }

            .basket-rim {
                width: 54px;
                bottom: 35px;
            }

            .basket-veggies {
                font-size: 0.5em;
            }

            .basket-label {
                font-size: 0.55em;
                bottom: -22px;
            }

            .basket-progress {
                gap: 12px;
                margin-bottom: 35px;
            }

            .status-bar {
                flex-direction: column;
                gap: 8px;
                padding: 12px 15px;
            }

            .status-value {
                font-size: 1.2em;
            }

            .rabbit-img {
                width: 70px;
            }

            .settings-grid {
                grid-template-columns: 1fr;
            }

            .setting-group {
                padding: 12px;
            }

            .start-btn {
                font-size: 1.3em;
                padding: 12px 25px;
            }

            .feedback {
                padding: 25px 35px;
                font-size: 1.5em;
            }

            .end-content {
                padding: 30px 20px;
            }

            .end-title {
                font-size: 2em;
            }

            .end-message {
                font-size: 1.1em;
            }
        }

        @media (max-width: 400px) {
            .game-title {
                font-size: 1.4em;
            }

            .answer-btn {
                padding: 10px 6px;
                font-size: 1.1em;
            }

            .basket {
                width: 45px;
                height: 55px;
            }

            .basket-body {
                width: 45px;
                height: 38px;
            }

            .basket-rim {
                width: 49px;
                bottom: 33px;
            }

            .basket-veggies {
                font-size: 0.45em;
            }

            .basket-label {
                font-size: 0.5em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <h1 class="game-title">Hop Along with Rabbit</h1>
            <p class="game-subtitle">Help Hop the Rabbit gather food for his babies this winter!</p>
        </header>

        <!-- Settings Panel -->
        <div class="settings-panel" id="settingsPanel">
            <h2 class="settings-title">Game Settings</h2>
            <div class="settings-grid">
                <div class="setting-group">
                    <label class="setting-label">Max Number (4-15)</label>
                    <div class="difficulty-buttons" id="difficultyButtons">
                        <button type="button" class="diff-btn" data-value="4">4</button>
                        <button type="button" class="diff-btn selected" data-value="5">5</button>
                        <button type="button" class="diff-btn" data-value="6">6</button>
                        <button type="button" class="diff-btn" data-value="7">7</button>
                        <button type="button" class="diff-btn" data-value="8">8</button>
                        <button type="button" class="diff-btn" data-value="9">9</button>
                        <button type="button" class="diff-btn" data-value="10">10</button>
                        <button type="button" class="diff-btn" data-value="11">11</button>
                        <button type="button" class="diff-btn" data-value="12">12</button>
                        <button type="button" class="diff-btn" data-value="13">13</button>
                        <button type="button" class="diff-btn" data-value="14">14</button>
                        <button type="button" class="diff-btn" data-value="15">15</button>
                    </div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">Questions per Level</label>
                    <input type="number" class="setting-input" id="questionsInput" value="5" min="1" max="50">
                </div>

                <div class="setting-group">
                    <label class="setting-label">Operations</label>
                    <div class="operations-group">
                        <label class="operation-checkbox">
                            <input type="checkbox" id="opAdd" checked>
                            <span>+ Add</span>
                        </label>
                        <label class="operation-checkbox">
                            <input type="checkbox" id="opSubtract" checked>
                            <span>- Subtract</span>
                        </label>
                        <label class="operation-checkbox">
                            <input type="checkbox" id="opMultiply">
                            <span>√ó Multiply</span>
                        </label>
                        <label class="operation-checkbox">
                            <input type="checkbox" id="opDivide">
                            <span>√∑ Divide</span>
                        </label>
                    </div>
                </div>
            </div>
            <button class="start-btn" id="startBtn">Start Game!</button>
        </div>

        <!-- Game Area -->
        <div class="game-area" id="gameArea">
            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-label">Level</div>
                    <div class="status-value" id="levelDisplay">1 / 4</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Veggies</div>
                    <div class="status-value" id="veggiesDisplay">0 / 30</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Lives</div>
                    <div class="lives-display" id="livesDisplay">
                        <span class="life-heart">‚ù§Ô∏è</span>
                        <span class="life-heart">‚ù§Ô∏è</span>
                        <span class="life-heart">‚ù§Ô∏è</span>
                    </div>
                </div>
                <button class="start-btn" style="padding: 10px 20px; font-size: 1em; max-width: 150px;" id="restartBtn">Restart</button>
            </div>

            <!-- Basket Progress -->
            <div class="basket-progress">
                <div class="basket" id="basket1">
                    <div class="basket-rim"></div>
                    <div class="basket-body">
                        <div class="basket-veggies" id="basketVeggies1"></div>
                    </div>
                    <span class="basket-label">Carrots</span>
                </div>
                <div class="basket" id="basket2">
                    <div class="basket-rim"></div>
                    <div class="basket-body">
                        <div class="basket-veggies" id="basketVeggies2"></div>
                    </div>
                    <span class="basket-label">Lettuce</span>
                </div>
                <div class="basket" id="basket3">
                    <div class="basket-rim"></div>
                    <div class="basket-body">
                        <div class="basket-veggies" id="basketVeggies3"></div>
                    </div>
                    <span class="basket-label">Tomatoes</span>
                </div>
                <div class="basket" id="basket4">
                    <div class="basket-rim"></div>
                    <div class="basket-body">
                        <div class="basket-veggies" id="basketVeggies4"></div>
                    </div>
                    <span class="basket-label">Radishes</span>
                </div>
            </div>

            <!-- Scene Area -->
            <div class="scene-area" id="sceneArea">
                <!-- Clouds -->
                <div class="cloud cloud1"></div>
                <div class="cloud cloud2"></div>
                <div class="cloud cloud3"></div>

                <!-- Rabbit Den -->
                <div class="rabbit-den">
                    <div class="den-mound"></div>
                    <div class="den-hole"></div>
                    <div class="baby-bunnies" id="babyBunnies">
                        <span class="baby-bunny">üê∞</span>
                        <span class="baby-bunny">üê∞</span>
                        <span class="baby-bunny">üê∞</span>
                    </div>
                </div>

                <!-- Peter Rabbit -->
                <div class="rabbit" id="rabbit">
                    <img class="rabbit-img" src="Bunny.png" alt="Bunny">
                </div>

                <!-- Dog -->
                <div class="dog" id="dog">üêï</div>
                <div class="bark-bubble" id="barkBubble">WOOF!</div>

                <!-- Sleeping Scene (for win) -->
                <div class="sleeping-scene" id="sleepingScene">
                    <div class="moon"></div>
                    <div class="stars">
                        <span class="star" style="top: 20%; left: 20%;">‚≠ê</span>
                        <span class="star" style="top: 30%; left: 60%;">‚ú®</span>
                        <span class="star" style="top: 15%; left: 80%;">‚≠ê</span>
                        <span class="star" style="top: 40%; left: 40%;">‚ú®</span>
                        <span class="star" style="top: 25%; left: 10%;">‚ú®</span>
                        <span class="star" style="top: 35%; left: 90%;">‚≠ê</span>
                    </div>
                    <div class="cozy-den">
                        <div class="veggie-pile-left">ü•ïü•¨üçÖ</div>
                        <div class="sleeping-family">
                            <span class="parent-rabbit">üê∞</span>
                            <span class="baby-rabbits">üêáüêáüêáüêá</span>
                        </div>
                        <div class="veggie-pile-right">ü•ïü•¨üçÖ</div>
                        <div class="zzz">üí§</div>
                        <div class="veggie-floor">ü•ïü•¨üçÖü•ïü•¨üçÖü•ïü•¨üçÖü•ï</div>
                    </div>
                </div>
            </div>

            <!-- Math Problem Area -->
            <div class="problem-area" id="problemArea">
                <div class="problem-text" id="problemText">5 + 3 = ?</div>
                <div class="answers-grid" id="answersGrid">
                    <!-- Answers will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Feedback Popup -->
        <div class="feedback" id="feedback">
            <span class="feedback-emoji" id="feedbackEmoji">ü•ï</span>
            <span id="feedbackText">Great job!</span>
            <div class="feedback-sub" id="feedbackSub"></div>
        </div>

        <!-- Game End Screen -->
        <div class="game-end-screen" id="gameEndScreen">
            <div class="end-content">
                <div class="end-emoji" id="endEmoji">üéâ</div>
                <h2 class="end-title" id="endTitle">You Win!</h2>
                <p class="end-message" id="endMessage">Peter Rabbit is cozy with the babies!</p>
                <button class="play-again-btn" id="playAgainBtn">Play Again!</button>
            </div>
        </div>
    </div>

    <script>
        // Sound Effects using Web Audio API
        class SoundManager {
            constructor() {
                this.audioContext = null;
                this.initialized = false;
            }

            init() {
                if (this.initialized) return;
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    this.initialized = true;
                } catch (e) {
                    console.log('Web Audio API not supported');
                }
            }

            playTone(frequency, duration, type = 'sine', volume = 0.3) {
                if (!this.initialized) this.init();
                if (!this.audioContext) return;

                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);

                oscillator.frequency.value = frequency;
                oscillator.type = type;
                gainNode.gain.setValueAtTime(volume, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration);

                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + duration);
            }

            playCorrect() {
                // Happy ascending tones
                this.playTone(523, 0.15, 'sine', 0.3);
                setTimeout(() => this.playTone(659, 0.15, 'sine', 0.3), 100);
                setTimeout(() => this.playTone(784, 0.2, 'sine', 0.3), 200);
            }

            playWrong() {
                // Big dog bark - deep "RUFF" sound
                this.playBigDogBark();
            }

            playBigDogBark() {
                // Deep, throaty big dog bark - "RUFF RUFF"
                // First bark
                this.playTone(90, 0.08, 'sawtooth', 0.6);
                this.playTone(85, 0.08, 'square', 0.4);
                setTimeout(() => {
                    this.playTone(70, 0.15, 'sawtooth', 0.7);
                    this.playTone(75, 0.12, 'square', 0.5);
                }, 60);
                setTimeout(() => {
                    this.playTone(60, 0.1, 'sawtooth', 0.5);
                }, 150);
            }

            playBarkLoud() {
                // Aggressive loud barking - multiple deep "RUFF RUFF RUFF"
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        // Deep growly bark
                        this.playTone(80, 0.1, 'sawtooth', 0.7);
                        this.playTone(75, 0.1, 'square', 0.5);
                        setTimeout(() => {
                            this.playTone(65, 0.18, 'sawtooth', 0.8);
                            this.playTone(70, 0.15, 'square', 0.6);
                        }, 70);
                        setTimeout(() => {
                            this.playTone(55, 0.12, 'sawtooth', 0.6);
                        }, 160);
                    }, i * 350);
                }
            }

            playLevelComplete() {
                // Baby bunnies chirping - high happy sounds
                const chirpPattern = [800, 1000, 900, 1100, 950];
                chirpPattern.forEach((freq, i) => {
                    setTimeout(() => {
                        this.playTone(freq, 0.1, 'sine', 0.25);
                    }, i * 120);
                });
            }

            playGameWin() {
                // Snoozing sound - peaceful tones
                const snorePattern = [
                    { freq: 200, dur: 0.5 },
                    { freq: 180, dur: 0.4 },
                    { freq: 220, dur: 0.6 },
                    { freq: 190, dur: 0.5 }
                ];
                let delay = 0;
                snorePattern.forEach((note, i) => {
                    setTimeout(() => {
                        this.playTone(note.freq, note.dur, 'sine', 0.15);
                    }, delay);
                    delay += note.dur * 1000 + 200;
                });
            }

            playGameOver() {
                // Sad descending tones
                this.playTone(400, 0.3, 'sine', 0.3);
                setTimeout(() => this.playTone(350, 0.3, 'sine', 0.3), 300);
                setTimeout(() => this.playTone(300, 0.4, 'sine', 0.3), 600);
            }
        }

        const soundManager = new SoundManager();

        // Game State
        const gameState = {
            currentLevel: 1,
            totalLevels: 4,
            veggiesCollected: 0,
            questionsPerLevel: 30,
            lives: 3,
            maxLives: 3,
            maxNumber: 15,
            operations: ['add', 'subtract'],
            currentAnswer: 0,
            isPlaying: false,
            completedLevels: []
        };

        const levelNames = ['Carrots', 'Lettuce', 'Tomatoes', 'Radishes'];
        const veggieEmojis = ['ü•ï', 'ü•¨', 'ü•¶', 'üçÖ', 'üåΩ', 'ü•í'];
        // Veggies for each basket level
        const basketVeggies = {
            1: 'ü•ï', // Carrots
            2: 'ü•¨', // Lettuce
            3: 'üçÖ', // Tomatoes
            4: 'ü•ï'  // Radishes (using carrot as radish emoji substitute, or we use the red one)
        };
        // Actually let's use a different approach for radishes
        const levelVeggieEmoji = ['ü•ï', 'ü•¨', 'üçÖ', 'üå∞']; // carrot, lettuce, tomato, radish-like

        // DOM Elements
        const settingsPanel = document.getElementById('settingsPanel');
        const gameArea = document.getElementById('gameArea');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const difficultyButtons = document.getElementById('difficultyButtons');
        const questionsInput = document.getElementById('questionsInput');
        const levelDisplay = document.getElementById('levelDisplay');
        const veggiesDisplay = document.getElementById('veggiesDisplay');
        const livesDisplay = document.getElementById('livesDisplay');
        const problemText = document.getElementById('problemText');
        const answersGrid = document.getElementById('answersGrid');
        const feedback = document.getElementById('feedback');
        const feedbackEmoji = document.getElementById('feedbackEmoji');
        const feedbackText = document.getElementById('feedbackText');
        const feedbackSub = document.getElementById('feedbackSub');
        const rabbit = document.getElementById('rabbit');
        const dog = document.getElementById('dog');
        const barkBubble = document.getElementById('barkBubble');
        const babyBunnies = document.getElementById('babyBunnies');
        const gameEndScreen = document.getElementById('gameEndScreen');
        const endEmoji = document.getElementById('endEmoji');
        const endTitle = document.getElementById('endTitle');
        const endMessage = document.getElementById('endMessage');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const sceneArea = document.getElementById('sceneArea');
        const sleepingScene = document.getElementById('sleepingScene');

        // Event Listeners
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', restartGame);
        playAgainBtn.addEventListener('click', restartGame);

        // Difficulty button selection
        difficultyButtons.addEventListener('click', (e) => {
            if (e.target.classList.contains('diff-btn')) {
                // Remove selected from all buttons
                difficultyButtons.querySelectorAll('.diff-btn').forEach(btn => btn.classList.remove('selected'));
                // Add selected to clicked button
                e.target.classList.add('selected');
            }
        });

        // Initialize sound on first interaction
        document.addEventListener('click', () => soundManager.init(), { once: true });

        function startGame() {
            // Get settings
            const selectedDiffBtn = difficultyButtons.querySelector('.diff-btn.selected');
            gameState.maxNumber = selectedDiffBtn ? parseInt(selectedDiffBtn.dataset.value) : 5;
            gameState.questionsPerLevel = parseInt(questionsInput.value) || 5;

            // Get selected operations
            gameState.operations = [];
            if (document.getElementById('opAdd').checked) gameState.operations.push('add');
            if (document.getElementById('opSubtract').checked) gameState.operations.push('subtract');
            if (document.getElementById('opMultiply').checked) gameState.operations.push('multiply');
            if (document.getElementById('opDivide').checked) gameState.operations.push('divide');

            if (gameState.operations.length === 0) {
                gameState.operations = ['add']; // Default to addition
                document.getElementById('opAdd').checked = true;
            }

            // Reset game state
            gameState.currentLevel = 1;
            gameState.veggiesCollected = 0;
            gameState.lives = 3;
            gameState.isPlaying = true;
            gameState.completedLevels = [];

            // Reset baskets
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`basket${i}`).classList.remove('complete');
            }
            clearAllBasketVeggies();

            // Hide settings, show game
            settingsPanel.style.display = 'none';
            gameArea.classList.add('active');
            sleepingScene.classList.remove('active');

            // Reset rabbit
            rabbit.style.left = '150px';
            rabbit.style.opacity = '1';
            rabbit.style.display = 'block';
            rabbit.classList.remove('scared', 'running', 'celebrating', 'sleeping');

            // Reset dog
            dog.classList.remove('barking');
            dog.style.right = '-100px';
            barkBubble.classList.remove('visible');

            updateDisplay();
            generateProblem();
        }

        function restartGame() {
            gameEndScreen.classList.remove('show');
            settingsPanel.style.display = 'block';
            gameArea.classList.remove('active');
            gameState.isPlaying = false;
        }

        function updateDisplay() {
            levelDisplay.textContent = `${gameState.currentLevel} / ${gameState.totalLevels}`;
            veggiesDisplay.textContent = `${gameState.veggiesCollected} / ${gameState.questionsPerLevel}`;

            // Update lives
            const hearts = livesDisplay.querySelectorAll('.life-heart');
            hearts.forEach((heart, i) => {
                if (i < gameState.lives) {
                    heart.classList.remove('lost');
                } else {
                    heart.classList.add('lost');
                }
            });

            // Update basket veggies for current level
            updateBasketVeggies(gameState.currentLevel, gameState.veggiesCollected);
        }

        function updateBasketVeggies(level, count) {
            const basketVeggiesEl = document.getElementById(`basketVeggies${level}`);
            if (!basketVeggiesEl) return;

            // Different veggie emoji for each level
            const veggieTypes = ['ü•ï', 'ü•¨', 'üçÖ', 'ü•ï']; // carrot, lettuce, tomato, radish (using small carrot)
            const veggie = veggieTypes[level - 1];

            // Calculate how many veggies to show (scale to fit basket nicely)
            // Show proportionally - max about 20 veggies visually
            const maxVisualVeggies = 25;
            const veggieCount = Math.ceil((count / gameState.questionsPerLevel) * maxVisualVeggies);

            // Build veggie string with slight randomness for natural look
            let veggieHTML = '';
            for (let i = 0; i < veggieCount; i++) {
                // Add slight size variation for natural pile look
                const sizeVariation = 0.8 + Math.random() * 0.4;
                veggieHTML += `<span style="font-size: ${sizeVariation}em; transform: rotate(${Math.random() * 30 - 15}deg);">${veggie}</span>`;
            }

            basketVeggiesEl.innerHTML = veggieHTML;
        }

        function clearAllBasketVeggies() {
            for (let i = 1; i <= 4; i++) {
                const basketVeggiesEl = document.getElementById(`basketVeggies${i}`);
                if (basketVeggiesEl) {
                    basketVeggiesEl.innerHTML = '';
                }
            }
        }

        function generateProblem() {
            // Get current difficulty based on level and progress within level
            const levelProgress = gameState.veggiesCollected / gameState.questionsPerLevel;
            const overallProgress = ((gameState.currentLevel - 1) + levelProgress) / gameState.totalLevels;

            // Calculate current max number - scales from ~40% of max to 100% of max across the game
            const minFactor = 0.4;
            const currentMaxNumber = Math.max(3, Math.floor(gameState.maxNumber * (minFactor + (1 - minFactor) * overallProgress)));

            // Select operation based on difficulty weighting
            const operation = selectWeightedOperation(overallProgress);

            let num1, num2, answer, problemString;

            switch (operation) {
                case 'add':
                    num1 = Math.floor(Math.random() * currentMaxNumber) + 1;
                    num2 = Math.floor(Math.random() * currentMaxNumber) + 1;
                    answer = num1 + num2;
                    problemString = `${num1} + ${num2} = ?`;
                    break;

                case 'subtract':
                    num1 = Math.floor(Math.random() * currentMaxNumber) + 1;
                    num2 = Math.floor(Math.random() * num1) + 1; // Ensure positive result
                    answer = num1 - num2;
                    problemString = `${num1} - ${num2} = ?`;
                    break;

                case 'multiply':
                    // Keep multiplication numbers smaller for manageability
                    const multMax = Math.min(currentMaxNumber, 12);
                    num1 = Math.floor(Math.random() * multMax) + 1;
                    num2 = Math.floor(Math.random() * multMax) + 1;
                    answer = num1 * num2;
                    problemString = `${num1} √ó ${num2} = ?`;
                    break;

                case 'divide':
                    // Limit divisor and answer to keep dividend manageable
                    const divMax = Math.min(currentMaxNumber, 12);
                    num2 = Math.floor(Math.random() * divMax) + 1;
                    answer = Math.floor(Math.random() * divMax) + 1;
                    num1 = num2 * answer; // Ensure clean division
                    problemString = `${num1} √∑ ${num2} = ?`;
                    break;
            }

            gameState.currentAnswer = answer;
            problemText.textContent = problemString;

            // Generate answer choices
            generateAnswerChoices(answer);
        }

        function selectWeightedOperation(progress) {
            // Operations ordered from easiest to hardest: add, subtract, multiply, divide
            const operationOrder = ['add', 'subtract', 'multiply', 'divide'];

            // Filter to only selected operations, maintaining difficulty order
            const availableOps = operationOrder.filter(op => gameState.operations.includes(op));

            if (availableOps.length === 1) {
                return availableOps[0];
            }

            // Calculate weights: early game favors easier ops, late game favors harder ops
            // Progress 0 = heavily favor easy ops, Progress 1 = more even/favor hard ops
            const weights = availableOps.map((op, index) => {
                const opDifficulty = index / (availableOps.length - 1); // 0 = easiest, 1 = hardest

                // Early game: high weight for easy ops, low for hard
                // Late game: more even weights, slight favor for harder ops
                if (progress < 0.25) {
                    // Level 1: strongly favor easier operations
                    return opDifficulty < 0.5 ? 4 : 1;
                } else if (progress < 0.5) {
                    // Level 2: moderately favor easier operations
                    return opDifficulty < 0.5 ? 3 : 2;
                } else if (progress < 0.75) {
                    // Level 3: roughly even
                    return 2;
                } else {
                    // Level 4: slightly favor harder operations
                    return opDifficulty >= 0.5 ? 3 : 2;
                }
            });

            // Weighted random selection
            const totalWeight = weights.reduce((a, b) => a + b, 0);
            let random = Math.random() * totalWeight;

            for (let i = 0; i < availableOps.length; i++) {
                random -= weights[i];
                if (random <= 0) {
                    return availableOps[i];
                }
            }

            return availableOps[availableOps.length - 1];
        }

        function generateAnswerChoices(correctAnswer) {
            const answers = new Set([correctAnswer]);

            // Generate 8 wrong answers
            while (answers.size < 9) {
                let wrongAnswer;
                const variance = Math.max(10, Math.floor(correctAnswer * 0.5) + 5);
                wrongAnswer = correctAnswer + Math.floor(Math.random() * variance * 2) - variance;
                if (wrongAnswer >= 0 && wrongAnswer !== correctAnswer) {
                    answers.add(wrongAnswer);
                }
            }

            // Shuffle answers
            const shuffledAnswers = Array.from(answers).sort(() => Math.random() - 0.5);

            // Create buttons
            answersGrid.innerHTML = '';
            shuffledAnswers.forEach(answer => {
                const btn = document.createElement('button');
                btn.className = 'answer-btn';
                btn.textContent = answer;
                btn.addEventListener('click', () => checkAnswer(answer, btn));
                answersGrid.appendChild(btn);
            });
        }

        function checkAnswer(selectedAnswer, button) {
            if (!gameState.isPlaying) return;

            // Disable all buttons temporarily
            const buttons = answersGrid.querySelectorAll('.answer-btn');
            buttons.forEach(btn => btn.style.pointerEvents = 'none');

            if (selectedAnswer === gameState.currentAnswer) {
                // Correct answer!
                button.classList.add('correct');
                soundManager.playCorrect();
                gameState.veggiesCollected++;

                // Show veggie animation
                showVeggieAnimation();

                // Rabbit celebrates
                rabbit.classList.add('celebrating');
                setTimeout(() => rabbit.classList.remove('celebrating'), 500);

                updateDisplay();

                if (gameState.veggiesCollected >= gameState.questionsPerLevel) {
                    // Level complete!
                    setTimeout(() => levelComplete(), 500);
                } else {
                    // Next problem
                    setTimeout(() => {
                        buttons.forEach(btn => btn.style.pointerEvents = 'auto');
                        generateProblem();
                    }, 800);
                }
            } else {
                // Wrong answer
                button.classList.add('wrong');
                soundManager.playWrong();
                gameState.lives--;

                // Dog barks
                showDogBark();

                // Rabbit scared
                rabbit.classList.add('scared');

                updateDisplay();

                if (gameState.lives <= 0) {
                    // Level failed - rabbit runs away
                    setTimeout(() => levelFailed(), 1000);
                } else {
                    // Continue with same problem
                    setTimeout(() => {
                        rabbit.classList.remove('scared');
                        dog.classList.remove('barking');
                        barkBubble.classList.remove('visible');
                        buttons.forEach(btn => {
                            btn.classList.remove('wrong');
                            btn.style.pointerEvents = 'auto';
                        });
                    }, 1200);
                }
            }
        }

        function showVeggieAnimation() {
            const veggie = document.createElement('div');
            veggie.className = 'collected-veggie';
            // Use the veggie type for current level
            const veggieTypes = ['ü•ï', 'ü•¨', 'üçÖ', 'ü•ï'];
            veggie.textContent = veggieTypes[gameState.currentLevel - 1];
            veggie.style.left = '180px';
            veggie.style.bottom = '80px';
            sceneArea.appendChild(veggie);

            setTimeout(() => veggie.remove(), 1000);
        }

        function showDogBark() {
            dog.classList.add('barking');
            dog.style.right = '30px';
            barkBubble.classList.add('visible');

            setTimeout(() => {
                dog.classList.remove('barking');
                dog.style.right = '-100px';
                barkBubble.classList.remove('visible');
            }, 1000);
        }

        function levelComplete() {
            gameState.isPlaying = false;
            gameState.completedLevels.push(gameState.currentLevel);

            // Mark basket as complete
            document.getElementById(`basket${gameState.currentLevel}`).classList.add('complete');

            // Show baby bunnies and play chirp
            babyBunnies.classList.add('excited');
            soundManager.playLevelComplete();

            // Show feedback
            feedbackEmoji.textContent = 'üß∫';
            feedbackText.textContent = `Level ${gameState.currentLevel} Complete!`;
            feedbackSub.textContent = `Basket ${gameState.currentLevel} filled with veggies!`;
            feedback.classList.add('show');

            setTimeout(() => {
                feedback.classList.remove('show');
                babyBunnies.classList.remove('excited');

                if (gameState.currentLevel >= gameState.totalLevels) {
                    // Game won!
                    gameWon();
                } else {
                    // Next level
                    gameState.currentLevel++;
                    gameState.veggiesCollected = 0;
                    gameState.lives = 3;
                    gameState.isPlaying = true;
                    updateDisplay();
                    generateProblem();
                }
            }, 2500);
        }

        function levelFailed() {
            gameState.isPlaying = false;

            // Dog barks aggressively
            soundManager.playBarkLoud();
            dog.classList.add('barking');
            dog.style.right = '30px';
            barkBubble.classList.add('visible');

            // Rabbit runs away
            rabbit.classList.remove('scared');
            rabbit.classList.add('running');

            // Show feedback
            feedbackEmoji.textContent = 'üò¢';
            feedbackText.textContent = 'Oh no!';
            feedbackSub.textContent = 'The dog scared Hop away! Try again!';
            feedback.classList.add('show');

            setTimeout(() => {
                feedback.classList.remove('show');
                dog.classList.remove('barking');
                dog.style.right = '-100px';
                barkBubble.classList.remove('visible');

                // Reset rabbit
                rabbit.classList.remove('running');
                rabbit.style.left = '150px';
                rabbit.style.opacity = '1';

                // Reset level progress
                gameState.veggiesCollected = 0;
                gameState.lives = 3;
                // Clear veggies from current basket
                const basketVeggiesEl = document.getElementById(`basketVeggies${gameState.currentLevel}`);
                if (basketVeggiesEl) basketVeggiesEl.innerHTML = '';

                gameState.isPlaying = true;
                updateDisplay();
                generateProblem();
            }, 2500);
        }

        function gameWon() {
            // Show sleeping scene
            sleepingScene.classList.add('active');
            soundManager.playGameWin();

            // Add sleeping animation to rabbit
            rabbit.style.display = 'none';

            setTimeout(() => {
                endEmoji.textContent = 'üê∞üí§';
                endTitle.textContent = 'You Win!';
                endMessage.textContent = 'Hop collected all 4 baskets of veggies and is now snuggled up cozily with his baby bunnies!';
                gameEndScreen.classList.add('show');
            }, 3000);
        }

        function gameOver() {
            soundManager.playGameOver();
            endEmoji.textContent = 'üò¢';
            endTitle.textContent = 'Game Over';
            endMessage.textContent = 'Don\'t worry! Peter Rabbit will try again!';
            gameEndScreen.classList.add('show');
        }
    </script>
</body>
</html>
